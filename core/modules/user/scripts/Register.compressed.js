ScriptLoader.load("ValidForm");var Register=new Class({Extends:ValidForm,initialize:function(a){this.parent(a);if(this.componentElement){this.loginField=this.form.getElementById("u_name");this.registerButton=this.form.getElement("button[name=register]");this.loginField.addEvent("blur",function(b){var b=new Event(b||window.event);if(this.validator.validateElement(b.target)){this.checkLogin(this.loginField.get("value"))}else{this.registerButton.setProperty("disabled","disabled");this.cancelEvent(b)}}.bind(this));this.captchaField=this.form.getElementById("captcha");this.captchaImage=this.form.getElementById("captchaImage")}},checkLogin:function(a){new Request.JSON({url:this.componentElement.getProperty("single_template")+"check/",method:"post",onSuccess:function(b){if(!b.result){this.validator.showError(this.loginField,b.message);this.registerButton.setProperty("disabled","disabled")}else{this.registerButton.removeProperty("disabled")}}.bind(this)}).send("login="+a)}});