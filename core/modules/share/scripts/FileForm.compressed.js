ScriptLoader.load("Form","ModalBox");var FileForm=new Class({Extends:Form,initialize:function(a){this.parent(a)},saveDir:function(){if(!this.validator.validate()){return false}this.request(this.componentElement.getProperty("single_template")+"save-dir",this.form.toQueryString()+"&path="+ModalBox.getExtraData(),function(){ModalBox.setReturnValue(true);this.close()}.bind(this))},save:function(){if(!this.validator.validate()){return false}this.request(this.singlePath+"save",this.form.toQueryString(),function(){ModalBox.setReturnValue(true);this.close()}.bind(this))},saveZip:function(){if(!this.validator.validate()){return false}this.request(this.singlePath+"save-zip",this.form.toQueryString()+"&path="+ModalBox.getExtraData(),function(){ModalBox.setReturnValue(true);this.close()}.bind(this))},_buildUpload:function(b,a){var c=$("uploader");if(!c){if(Browser.Engine.trident){c=$(document.createElement('<iframe name="uploader" id="uploader">'))}else{c=new Element("iframe").setProperties({name:"uploader",id:"uploader"})}c.setStyles({width:0,height:0,border:0,position:"absolute"});c.injectBefore(this.form)}c.filename=$(b.getAttribute("link"));c.preview=$(b.getAttribute("preview"));var e=new Element("input").setProperty("name","path").setProperties({id:"path",type:"hidden",value:ModalBox.getExtraData()}).injectInside(this.form);var d=new Element("img").setProperties({id:"progress_bar",src:"images/loading.gif"}).injectAfter(b);this.form.setProperties({action:this.componentElement.getProperty("single_template")+a,target:"uploader"});this.form.submit();this.form.setProperty("target","_self")}});