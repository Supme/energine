ScriptLoader.load("Toolbar","ModalBox");var PageToolbar=new Class({Extends:Toolbar,initialize:function(c,b,a){this.parent(a);Asset.css("pagetoolbar.css");this.componentPath=c;this.documentId=b;this.setupLayout();this.dock();this.bindTo(this)},setupLayout:function(){var b=$$("html")[0];if(!b.hasClass("e-has-topframe1")){b.addClass("e-has-topframe1")}if((Cookie.read("sidebar")==null)||(Cookie.read("sidebar")==1)){$$("html")[0].addClass("e-has-sideframe")}var f=$(document.body).getChildren().filter(function(h){return(!(h.hasClass("e-overlay")))});var a=new Element("div",{"class":"e-mainframe"});var g=new Element("div",{"class":"e-topframe"});var e=new Element("div",{"class":"e-sideframe"});var c=new Element("div",{"class":"e-sideframe-content"});var d=new Element("div",{"class":"e-sideframe-border"});$(document.body).adopt([g,a,e]);a.adopt(f);e.adopt([c,d]);g.grab(this.element);new Element("iframe").setProperties({src:this.componentPath+"show/",frameBorder:"0"}).injectInside(c)},editMode:function(){if(this.getControlById("editMode").getState()==0){var a=new Element("form",{styles:{display:"none"}}).setProperties({action:"",method:"post"}).injectInside(document.body);new Element("input").setProperty("name","editMode").setProperties({type:"hidden",value:"1"}).injectInside(a);a.submit()}else{window.location=window.location}},add:function(){ModalBox.open({url:this.componentPath+"add/"+this.documentId})},edit:function(){ModalBox.open({url:this.componentPath+this.documentId+"/edit"})},toggleSidebar:function(){$$("html")[0].toggleClass("e-has-sideframe");Cookie.write("sidebar",$$("html")[0].hasClass("e-has-sideframe")?1:0,{path:new URI(Energine.base).get("directory"),duration:1})},showTmplEditor:function(){ModalBox.open({url:this.componentPath+"template"})},showTransEditor:function(){ModalBox.open({url:this.componentPath+"translation"})},showUserEditor:function(){ModalBox.open({url:this.componentPath+"user"})},showRoleEditor:function(){ModalBox.open({url:this.componentPath+"role"})},showLangEditor:function(){ModalBox.open({url:this.componentPath+"languages"})},showFileRepository:function(){ModalBox.open({url:this.componentPath+"file-library"})}});